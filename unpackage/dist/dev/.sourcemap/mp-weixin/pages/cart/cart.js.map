{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Desktop/毕业设计/在线买菜小程序/shopping/pages/cart/cart.vue?7e5c","webpack:///D:/Desktop/毕业设计/在线买菜小程序/shopping/pages/cart/cart.vue?53eb","webpack:///D:/Desktop/毕业设计/在线买菜小程序/shopping/pages/cart/cart.vue?2c26","webpack:///D:/Desktop/毕业设计/在线买菜小程序/shopping/pages/cart/cart.vue?5159","uni-app:///pages/cart/cart.vue","webpack:///D:/Desktop/毕业设计/在线买菜小程序/shopping/pages/cart/cart.vue?d61b","webpack:///D:/Desktop/毕业设计/在线买菜小程序/shopping/pages/cart/cart.vue?6e16"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","cartGoods","cartTotal","checkedGoodsCount","checkedGoodsAmount","checkedAllStatus","hasLogin","noLoginPicUrl","noProductPicUrl","managePicUrl","donePicUrl","onLoad","onPullDownRefresh","uni","onShow","onHide","onUnload","methods","goLogin","url","getCartList","userId","req","console","that","isCheckedAll","checkedItem","api","checked","id","getCheckedGoodsCount","checkedAll","updateCart","goodsSn","number","utils","cutNumber","addNumber","checkoutOrder","deleteCart","title","content","success","goGoodsShop"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AACyM;AACzM,gBAAgB,yMAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpDA;AAAA;AAAA;AAAA;AAA+xB,CAAgB,0vBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+FnzB;AACA;AACA;AAEA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;QACAC;QAAA;QACAC;MACA;;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;;IAEA;EACA;EACAC;IACAC;;IAEA;IACAA;;IAEAA;EACA;;EACAC;IACA;IACA;MACA;IACA;IACA;EAEA;;EACAC;IACA;EAAA,CACA;EACAC;IACA;EAAA,CACA;EACAC;IACAC;MACAL;QACAM;MACA;IACA;IAEAC;MACA;MACA;QACAC;MACA;MACAC;QACA;UACAC;UACAC,gCACAA;UACAA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACAJ,YACAK;QACAN;QACAO;QACAC;MACA,GACA,OACA;QACA;UACAL;QACA;MACA;IACA;IACA;IACAM;MACA;MACA;MACA;QACA;UACA3B;UACAC;QACA;MACA;MACA;MACA;IACA;IACA;IACA2B;MACA;MACAT,YACAK;QACAC;QACAP;MACA,GACA,OACA;QACAE;QACA;UACAC;QACA;MACA;IACA;IAEAQ;MACA;MACA;QACAX;QACAY;QACAC;MACA;MACAZ;QACA;QACA;UACA;UACAE;QACA;UACAA;UACAW;UACA;QACA;MAEA;IACA;;IAEAC;MACA;MACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;IAEA;IAEAC;MACA;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;QACAzB;UACAM;QACA;MACA;IACA;IAEAoB;MACA;MACA1B;QACA2B;QACAC;QACAC;UACA;YACAnB;YACAD;cAAAO;YAAA;cACA;gBACAM;gBACAX;cACA;cACA;YACA;UACA,wBAEA;QACA;MACA;IACA;IACAmB;MACA9B;QACAM;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC7SA;AAAA;AAAA;AAAA;AAA8nC,CAAgB,uiCAAG,EAAC,C;;;;;;;;;;;ACAlpC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=0f00adf4&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=template&id=0f00adf4&\"","var components\ntry {\n  components = {\n    uRow: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-row/u-row\" */ \"@/uni_modules/uview-ui/components/u-row/u-row.vue\"\n      )\n    },\n    uCol: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-col/u-col\" */ \"@/uni_modules/uview-ui/components/u-col/u-col.vue\"\n      )\n    },\n    uLine: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-line/u-line\" */ \"@/uni_modules/uview-ui/components/u-line/u-line.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !!_vm.hasLogin ? _vm.cartGoods.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 未登录 -->\r\n\t\t<view class=\"no-login\" v-if=\"!hasLogin\">\r\n\t\t\t<view class=\"c\">\r\n\t\t\t\t<view class=\"imagesize logo\">\r\n\t\t\t\t\t<!-- <image class=\"in-image\" :src=\"gapLogoPicUrl\"></image> -->\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"imagesize\">\r\n\t\t\t\t\t<image class=\"in-image\" :src=\"noLoginPicUrl\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text>未登录</text>\r\n\t\t\t\t<text class=\"tip\">登录后继续浏览购物车商品!</text>\r\n\t\t\t\t<button @tap=\"goLogin\">去登录</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"login\" v-else>\r\n\t\t\t<!-- 购物车为空 -->\r\n\t\t\t<view class=\"no-cart\" v-if=\"cartGoods.length <= 0\">\r\n\t\t\t\t<view class=\"c\">\r\n\t\t\t\t\t<view class=\"imagesize\">\r\n\t\t\t\t\t\t<image class=\"in-image\" :src=\"noProductPicUrl\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text>购物车为空</text>\r\n\t\t\t\t\t<navigator class=\"btn\" url=\"/pages/home/home\" open-type=\"switchTab\">前去购物</navigator>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 购物车不为空 -->\r\n\t\t\t<view class=\"cart-view\" v-else>\r\n\t\t\t\t<view class=\"checkAll\">\r\n\t\t\t\t\t<checkbox-group @change=\"checkedAll\">\r\n\t\t\t\t\t\t<checkbox :value=\"all\" :checked=\"checkedAllStatus\">\r\n\t\t\t\t\t\t\t<span class=\"checkAllSpan\">全选</span>\r\n\t\t\t\t\t\t\t<span class=\"checkAllNum\">（共{{ cartTotal.checkedGoodsCount }}件）</span>\r\n\t\t\t\t\t\t</checkbox>\r\n\t\t\t\t\t</checkbox-group>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 商品列表 -->\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<scroll-view :scroll-y=\"true\" class=\"scrl\">\r\n\t\t\t\t\t\t<view class=\"group-item\">\r\n\t\t\t\t\t\t\t<view class=\"goods\">\r\n\t\t\t\t\t\t\t\t<view class=\"item\" v-for=\"(item, index) in cartGoods\" :key=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t<u-row>\r\n\t\t\t\t\t\t\t\t\t\t<u-col span=\"1\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"u_check\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<checkbox-group @change=\"checkedItem(item)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<checkbox :value=\"index\" :data-item-index=\"index\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:checked=\"item.checked\" class=\"check\"></checkbox>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</checkbox-group>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</u-col>\r\n\t\t\t\t\t\t\t\t\t\t<u-col offset=\"1\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"cart-goods\" @click=\"goGoodsShop(item.goodsSn)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<image class=\"img\" :src=\"item.picUrl\" background-size=\"contain\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>{{ item.goodsName }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"b\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"price\">￥{{ item.price }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"selnum\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"cut\" @tap.stop=\"cutNumber\" :data-item-index=\"index\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t-</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input :value=\"item.number\" class=\"number\" :disabled=\"true\" type=\"number\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"add\" @tap.stop=\"addNumber\" :data-item-index=\"index\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</u-col>\r\n\t\t\t\t\t\t\t\t\t</u-row>\r\n\t\t\t\t\t\t\t\t\t<u-line />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cart-bottom\">\r\n\t\t\t\t\t<view class=\"solo\">\r\n\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"total\">{{ '总计：￥' + cartTotal.checkedGoodsAmount }}</view>\r\n\t\t\t\t\t<view class=\"action_btn_area\">\r\n\t\t\t\t\t\t<view class=\"checkout\" @tap=\"checkoutOrder\">去结算({{ cartTotal.checkedGoodsCount }}件)</view>\r\n\t\t\t\t\t\t<!-- </view> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tconst api = require('@/utils/api.js')\r\n\tconst req = require('@/utils/request.js')\r\n\tconst utils = require('@/utils/utils.js')\r\n\r\n\tvar app = getApp();\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcartGoods: [],\r\n\t\t\t\tcartTotal: {\r\n\t\t\t\t\tcheckedGoodsCount: 0,//选中数量\r\n\t\t\t\t\tcheckedGoodsAmount: 0//选中金额\r\n\t\t\t\t},\r\n\t\t\t\tcheckedAllStatus: true,\r\n\t\t\t\thasLogin: false,\r\n\t\t\t\tnoLoginPicUrl: '/static/image/noLogin.jpg',\r\n\t\t\t\t// gapLogoPicUrl: '/static/image/logo.png',\r\n\t\t\t\tnoProductPicUrl: '/static/image/noCart.png',\r\n\t\t\t\tmanagePicUrl: '/static/image/manage.png',\r\n\t\t\t\tdonePicUrl: '/static/image/done.png'\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad: function(options) {\r\n\t\t\t// 页面初始化 options为页面跳转所带来的参数\r\n\t\t\t// console.log(\"登录状态\",app.globalData.hasLogin)\r\n\r\n\t\t\tthis.hasLogin = uni.getStorageSync(\"loginstatus\")\r\n\t\t},\r\n\t\tonPullDownRefresh() {\r\n\t\t\tuni.showNavigationBarLoading(); //在标题栏中显示加载\r\n\r\n\t\t\tthis.getCartList();\r\n\t\t\tuni.hideNavigationBarLoading(); //完成停止加载\r\n\r\n\t\t\tuni.stopPullDownRefresh(); //停止下拉刷新\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tthis.hasLogin = uni.getStorageSync(\"loginstatus\")\r\n\t\t\tif (this.hasLogin) {\r\n\t\t\t\tthis.getCartList();\r\n\t\t\t}\r\n\t\t\t// this.hasLogin = app.globalData.hasLogin\r\n\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\t// 页面隐藏\r\n\t\t},\r\n\t\tonUnload: function() {\r\n\t\t\t// 页面关闭\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgoLogin() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pagesB/accountLogin/accountLogin'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tgetCartList: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tvar params = {\r\n\t\t\t\t\tuserId: uni.getStorageSync(\"userId\")\r\n\t\t\t\t}\r\n\t\t\t\treq.request(api.CartList,params).then(function(res) {\r\n\t\t\t\t\tif (res.errno === 200) {\r\n\t\t\t\t\t\tconsole.log(\"购物车信息\", res)\r\n\t\t\t\t\t\tthat.cartGoods = res.data.list,\r\n\t\t\t\t\t\tthat.checkedAllStatus = that.isCheckedAll()\r\n\t\t\t\t\t\tthat.getCheckedGoodsCount();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//判断购物车商品是否全选\r\n\t\t\tisCheckedAll: function() {\r\n\t\t\t\treturn this.cartGoods.every(function(element, index, array) {\r\n\t\t\t\t\tif (element.checked == 1) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 勾选\r\n\t\t\tcheckedItem: function(item) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\treq.request(\r\n\t\t\t\t\tapi.CartChecked, {\r\n\t\t\t\t\t\tuserId:uni.getStorageSync(\"userId\"),\r\n\t\t\t\t\t\tchecked: item.checked == 1 ? 0 : 1,\r\n\t\t\t\t\t\tid: item.id\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'POST'\r\n\t\t\t\t).then(function(res) {\r\n\t\t\t\t\tif (res.errno === 200) {\r\n\t\t\t\t\t\tthat.getCartList();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取已选数量和金额\r\n\t\t\tgetCheckedGoodsCount: function() {\r\n\t\t\t\tlet checkedGoodsCount = 0;\r\n\t\t\t\tlet checkedGoodsAmount = 0;\r\n\t\t\t\tthis.cartGoods.forEach(function(v) {\r\n\t\t\t\t\tif (v.checked === 1) {\r\n\t\t\t\t\t\tcheckedGoodsCount += v.number;\r\n\t\t\t\t\t\tcheckedGoodsAmount += v.price * v.number;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.cartTotal.checkedGoodsCount = checkedGoodsCount;\r\n\t\t\t\tthis.cartTotal.checkedGoodsAmount = checkedGoodsAmount;\r\n\t\t\t},\r\n\t\t\t// 全选或取消全选\r\n\t\t\tcheckedAll: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\treq.request(\r\n\t\t\t\t\tapi.CartChecked, {\r\n\t\t\t\t\t\tchecked: that.isCheckedAll() ? 0 : 1,\r\n\t\t\t\t\t\tuserId:uni.getStorageSync(\"userId\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'POST'\r\n\t\t\t\t).then(function(res) {\r\n\t\t\t\t\tconsole.log(\"全选\",res)\r\n\t\t\t\t\tif (res.errno === 200) {\r\n\t\t\t\t\t\tthat.getCartList();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tupdateCart: function(goodsSn, number, originNumber, itemIndex) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tvar params = {\r\n\t\t\t\t\tuserId: uni.getStorageSync(\"userId\"),\r\n\t\t\t\t\tgoodsSn: goodsSn,\r\n\t\t\t\t\tnumber: number,\r\n\t\t\t\t}\r\n\t\t\t\treq.request(api.CartUpdate,params,'POST').then(function(res) {\r\n\t\t\t\t\t// console.log(\"更新数量返回结果：\", res);\r\n\t\t\t\t\tif (res.errno == 200) {\r\n\t\t\t\t\t\t// 更新成功的场合，设置新的数量\r\n\t\t\t\t\t\tthat.getCartList();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.cartGoods[itemIndex].number = originNumber;\r\n\t\t\t\t\t\tutils.showErrorToast(res.errmsg);\r\n\t\t\t\t\t\t// console.log(\"更新失败后商品数量：\" + originNumber);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tcutNumber: function(event) {\r\n\t\t\t\tlet itemIndex = event.target.dataset.itemIndex;\r\n\t\t\t\tlet cartItem = this.cartGoods[itemIndex];\r\n\t\t\t\tlet originNumber = cartItem.number;\r\n\t\t\t\tlet number = 0\r\n\t\t\t\tif(cartItem.number > 1){\r\n\t\t\t\t\tthis.updateCart(cartItem.goodsSn, number, originNumber,itemIndex);\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.deleteCart(cartItem.id);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\r\n\t\t\taddNumber: function(event) {\r\n\t\t\t\tlet itemIndex = event.target.dataset.itemIndex;\r\n\t\t\t\tlet cartItem = this.cartGoods[itemIndex];\r\n\t\t\t\tlet originNumber = cartItem.number;\r\n\t\t\t\tlet number = 1\r\n\t\t\t\tthis.updateCart(cartItem.goodsSn, number, originNumber,itemIndex);\r\n\t\t\t},\r\n\r\n\t\t\t// 去结算\r\n\t\t\tcheckoutOrder: function() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pagesB/checkout/checkout?'\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t},\r\n\r\n\t\t\tdeleteCart(id) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t    title: '提示',\r\n\t\t\t\t    content: '是否删除该商品？',\r\n\t\t\t\t    success: function (res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tconsole.log(id)\r\n\t\t\t\t\t\t\treq.request(api.CartDelete, {id: id},'POST').then(function(res) {\r\n\t\t\t\t\t\t\t\tif (res.errno === 200) {\r\n\t\t\t\t\t\t\t\t\tutils.showErrorToast('删除成功','none');\r\n\t\t\t\t\t\t\t\t\tthat.getCartList();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// that.checkedAllStatus = that.isCheckedAll()\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else if (res.cancel) {\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t    }\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgoGoodsShop(goodsSn) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pagesB/goodshop/goodshop?goodsSn=' + goodsSn\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t};\r\n</script>\r\n<style>\r\n\t@import './cart.css';\r\n</style>\n","import mod from \"-!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1685600401318\n      var cssReload = require(\"D:/QQ接收文件/HBuilderX3.1.22.20210709/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}